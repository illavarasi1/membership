
<div class="content-header">
  <div class="container-fluid">
    <div class="row mt-2  mb-2 d-flex justify-content-between align-items-center">
      <div class="col-sm-6">
        <h1 class="m-0 text-dark fs-3 fw-normal">Renewal</h1>
      </div>
      <div class="col-sm-6">
        <ol class="breadcrumb d-flex justify-content-end">
          <li class="breadcrumb-item text-primary fs-6"><a>Home</a></li>
          <li class="breadcrumb-item active fs-6">Renewal</li>
        </ol>
      </div>
    </div>
  </div>
</div>
<section class="content">
  <div class="container-fluid">
    <!-- Info boxes -->
    <div class="row">
    
    <div class="col-12">
<div class="card">
  <div class="card-header bg-white">
    <h3 class="card-title">Members DataTable</h3>
</div>
  <div class="row p-4">
    <div class="col-md-12">
      <div class="d-flex justify-content-between align-items-center mb-3">
        <div>
          Show
          <select class="form-select d-inline-block w-auto" [(ngModel)]="limit"
          (change)="getServerData()">
            <option *ngFor="let option of [5, 10, 25, 50]" [value]="option">{{ option }}</option>
          </select>
          entries
        </div>
        <div class="d-flex">
          <label class="mt-2 mr-1"for="search">Search:</label>
          <input
          type="text"
          class="form-control"
          id="search"
          [(ngModel)]="search"
          (keyup)="onSearchChange($event)"
          />
        </div>
      </div>
          <table class="table table-bordered table-striped">
            <thead>
              <tr>
                <th>#</th>
                <th>Fullname</th>
                <th>Contact</th>
                <th>Email</th>
                <th>Type</th>
                <th>Expiry</th>
                <th>Status</th>
                <th>Action</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let member of dataSource.data">
                <td>{{ member.membership_number }}</td>
                <td>{{ member.fullname }}</td>
                <td>{{ member.contact_number }}</td>
                <td>{{ member.email }}</td>
                <td>{{ member.membership_type }}</td>
                <td>
                  <ng-container *ngIf="member.expiry_date; else noExpiry">
                    {{ member.expiry_date | date:'yyyy-MM-dd' }}
                    <br />
                    <small *ngIf="member.expiry_date && getRemainingDays(member.expiry_date) > 0">
                      {{ getRemainingDays(member.expiry_date) }} days remaining
                    </small>
                    
                    <small *ngIf="!member.expiry_date || getRemainingDays(member.expiry_date) <= 0">
                      NONE
                    </small>
                  </ng-container>
                  <ng-template #noExpiry>NONE</ng-template>
                </td>
                <td>
                  <span
                    class="badge"
                    [ngClass]="{
                      'bg-success': member.status === 'Active',
                      'bg-danger': member.status === 'Expired'
                    }"
                  >
                  {{ isMembershipExpired(member.expiry_date || '') ? 'Expired' : 'Active' }}
                  </span>
                </td>
                <td>
                  <button
                    class="btn btn-success"
                    (click)="renewMembership(member)"
                
                  >
                    Renew
                  </button>
                </td>
              </tr>
            </tbody>
          </table>
        <div class="d-flex justify-content-between align-items-center mt-3">
    <span>Showing {{ startRecord }} to {{ endRecord }} of {{ totalRecords }} entries</span>
    <nav>
      <ul class="pagination">
        <li
          class="page-item"
          [class.disabled]="currentPage === 1"
          (click)="onPageChange(currentPage - 1)"
        >
        <a class="page-link" href="javascript:void(0)">Previous</a>
        </li>
        <li
          class="page-item"
          *ngFor="let page of totalPages"
          [class.disabled]="currentPage === page"
          (click)="onPageChange(page)"
        >
        <a class="page-link" href="javascript:void(0)">{{ page }}</a>
        </li>
        <li
          class="page-item"
          [class.disabled]="currentPage === totalPages.length"
          (click)="onPageChange(currentPage + 1)"
        >
        <a class="page-link" href="javascript:void(0)">Next</a>
        </li>
      </ul>
    </nav>
  </div>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<footer class="main-footer bg-light py-3">
  <div class="container-fluid">
    <div class="row align-items-center">
      <!-- Left Content -->
      <div class="col-md-6 col-12 text-center text-md-start">
        <strong>&copy; {{ currentYear }} CodeAstro.com</strong> - All rights reserved.
      </div>

      <!-- Right Content -->
      <div class="col-md-6 col-12 text-center text-md-end">
        <b>Developed By</b> <a href="https://codeastro.com/" class="text-primary">CodeAstro</a>
      </div>
    </div>
  </div>
</footer>
