
<div class="content-header">
  <div class="container-fluid">
    <div class="row mt-2  mb-2 d-flex justify-content-between align-items-center">
      <div class="col-sm-6">
        <h1 class="m-0 text-dark fs-3 fw-normal">{{ title }}</h1>
      </div>
      <div class="col-sm-6">
        <ol class="breadcrumb d-flex justify-content-end">
          <li class="breadcrumb-item text-primary fs-6"><a>Home</a></li>
          <li class="breadcrumb-item active fs-6">{{ title }}</li>
        </ol>
      </div>
    </div>
  </div>
</div>
<section class="content">
  <div class="container-fluid">
    <!-- Info boxes -->
    <div class="row">
    
    <div class="col-12">
<div class="card">
  <div class="card-header bg-white">
    <h3 class="card-title">Membership Types DataTable</h3>
</div>
  <div class="row p-4">
    <div class="col-md-12">
      <div class="d-flex justify-content-between align-items-center mb-3">
        <div>
          Show
          <select class="form-select d-inline-block w-auto" [(ngModel)]="limit"
          (change)="getServerData()">
            <option *ngFor="let option of [5, 10, 25, 50]" [value]="option">{{ option }}</option>
          </select>
          entries
        </div>
        <div class="d-flex">
          <label class="mt-2 mr-1"for="search">Search:</label>
          <input
          type="text"
          class="form-control"
          id="search"
          [(ngModel)]="search"
          (keyup)="onSearchChange($event)"
          />
        </div>
      </div>
  <table class="table table-bordered table-striped">
    <thead>
      <tr>
        <th>#</th>
        <th>Full Name</th>
        <th>Contact</th>
        <th>Email</th>
        <th>Address</th>
        <th>Type</th>
        <th>Status</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let member of dataSource.data">
        <td>{{ member.membership_number }}</td>
        <td>{{ member.fullname }}</td>
        <td>{{ member.contact_number }}</td>
        <td>{{ member.email }}</td>
        <td>{{ member.address }}</td>
        <td>  {{ member.membership_type }}</td>
        <td>
          <span class="badge" [class.bg-success]="member.status === 'Active'" [class.bg-danger]="member.status === 'Expired'">
            {{ member.status }}
          </span>
        </td>
        <td>
     <!-- View Button (only shown if expiry_date is not empty and membership is not expired or renewed) -->
<button *ngIf="member.expiry_date && !isMembershipExpired(member.expiry_date) && !isMembershipRenewed(member)"
class="btn btn-info mr-1" 
[routerLink]="'/admin/membership/' + member._id" 
title="View Member">
<i class='fas fa-id-card text-white'></i>
</button>

        
          <!-- Edit Button -->
          <button class="btn btn-primary  mr-1" 
                  [routerLink]="'/admin/members/' + member._id" 
                  title="Edit Member">
            <i class="fas fa-edit"></i>
          </button>
        
          <!-- Delete Button -->
          <button class="btn btn-danger" 
          (click)="delete(member._id || '')" 
                  title="Delete Member">
            <i class="fas fa-trash"></i>
          </button>
        </td>
        
      </tr>
    </tbody>
  </table>
  <div class="d-flex justify-content-between align-items-center mt-3">
    <span>Showing {{ startRecord }} to {{ endRecord }} of {{ totalRecords }} entries</span>
    <nav>
      <ul class="pagination">
        <li
          class="page-item"
          [class.disabled]="currentPage === 1"
          (click)="onPageChange(currentPage - 1)"
        >
        <a class="page-link" href="javascript:void(0)">Previous</a>
        </li>
        <li
          class="page-item"
          *ngFor="let page of totalPages"
          [class.disabled]="currentPage === page"
          (click)="onPageChange(page)"
        >
        <a class="page-link" href="javascript:void(0)">{{ page }}</a>
        </li>
        <li
          class="page-item"
          [class.disabled]="currentPage === totalPages.length"
          (click)="onPageChange(currentPage + 1)"
        >
        <a class="page-link" href="javascript:void(0)">Next</a>
        </li>
      </ul>
    </nav>
  </div>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<footer class="main-footer bg-light py-3">
  <div class="container-fluid">
    <div class="row align-items-center">
      <!-- Left Content -->
      <div class="col-md-6 col-12 text-center text-md-start">
        <strong>&copy; {{ currentYear }} CodeAstro.com</strong> - All rights reserved.
      </div>

      <!-- Right Content -->
      <div class="col-md-6 col-12 text-center text-md-end">
        <b>Developed By</b> <a href="https://codeastro.com/" class="text-primary">CodeAstro</a>
      </div>
    </div>
  </div>
</footer>
